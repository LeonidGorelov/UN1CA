From 18572f9680c2358dd3362d0752513611e3f0ed58 Mon Sep 17 00:00:00 2001
From: amruio <uioamr65@gmail.com>
Date: Fri, 1 Aug 2025 12:24:04 +0300
Subject: [PATCH] Disable UFS Power Saving on Init

Change-Id: I7859e4c1fc0afcca7a93965c75c477c82aa72af5
Signed-off-by: Majaahh <maja.blaszczak@proton.me>
---
 init.s5e8825.rc | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/init.s5e8825.rc b/init.s5e8825.rc
index 279ab72..8eb12af 100644
--- a/init.s5e8825.rc
+++ b/init.s5e8825.rc
@@ -26,6 +26,10 @@ on init
     symlink /storage/sdcard /mnt/ext_sd
     symlink /data/app /factory
 
+    # Disable UFS powersaving
+    write /sys/devices/platform/13500000.ufs/clkgate_enable 0
+    write /sys/devices/platform/13500000.ufs/auto_hibern8 0
+
     symlink /dev/block/by-name/steady /dev/block/steady
     symlink /dev/block/by-name/persistent /dev/block/persistent
     symlink /dev/block/by-name/param /dev/block/param
@@ -952,6 +956,10 @@ on property:sys.boot_completed=1
     chown radio system /efs/carrier
     chown radio system /efs/carrier/HiddenMenu
 
+    # Enable UFS powersaving
+    write /sys/devices/platform/13500000.ufs/clkgate_enable 1
+    write /sys/devices/platform/13500000.ufs/auto_hibern8 2000
+
 # KERNEL CORE MEMORY
 on boot
     write /proc/sys/vm/swappiness 130
-- 
2.52.0

